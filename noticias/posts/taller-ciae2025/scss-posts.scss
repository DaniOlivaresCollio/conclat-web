/* =========================================================
   LISA — Posts (fondo blanco) · versión limpia
   Mantiene: ancho texto 1040px + hero 1240px y 720px alto
   ========================================================= */

/*-- scss:defaults --*/
$ink:           #111827;
$ink-soft:      #374151;
$paper:         #FFFFFF;
$panel:         #FFFFFF;
$line:          #E5E7EB;
$lisa-red:      #D91A2A;
$lisa-red-dark: #B51622;
$link:          #0F6CBD;
$link-hover:    #084B8A;

$body-bg:        $paper !default;
$font-size-root: 18px !default;

@import url('https://fonts.googleapis.com/css2?family=Cabin:wght@500;600;700&family=Noto+Serif:wght@400;600;700&display=swap');
$mainFont:    'Noto Serif', serif !default;
$headingFont: 'Cabin', system-ui, -apple-system, "Segoe UI", Roboto, sans-serif !default;

$radius:   14px;
$shadow-1: 0 6px 16px rgba(17,24,39,.05);

/* Diales (NO cambiar tamaños) */
:root{
  --gap: 28px;                    /* separación entre bloques */
  --hero-max: 1240px;             /* ancho máximo banner */
  --content-max: 1040px;          /* ancho máximo cuerpo */
  --hero-height: 720px;           /* altura fija del hero (como la tienes) */
}

/* =========================================================
   Base
   ========================================================= */
html, body{
  background-color: $paper !important;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  overflow-x: hidden !important;  /* sin scroll horizontal */
}

/* Antes: #quarto-content {...}  -> Ahora: solo el artículo */
.page-columns .content{
  color: $ink;
  font-family: $mainFont;
  line-height: 1.6;
}

/* Títulos del artículo (no toques footer) */
.page-columns .content h1,
.page-columns .content h2,
.page-columns .content h3,
.page-columns .content h4,
.page-columns .content h5,
.page-columns .content h6{
  font-family: $headingFont;
  color: $ink;
  letter-spacing: .2px;
}
.page-columns .content h2{
  margin-top: 2rem;
  border-bottom: 2px solid $line;
  padding-bottom: .35rem;
}

/* Enlaces SOLO del artículo */
.page-columns .content a{ color: $link; text-decoration: none; }
.page-columns .content a:hover,
.page-columns .content a:focus{
  color: $link-hover; text-decoration: underline;
}

/* Código solo del artículo */
.page-columns .content pre{
  background:#0B1020; color:#F1F5F9;
  border-radius:12px; padding:1rem; box-shadow:$shadow-1;
  max-width: 100%; overflow-x: auto;
}
.page-columns .content code{
  background:#F3F4F6; color:#1F2937; padding:.1rem .35rem; border-radius:.35rem;
}

/* Figuras solo del artículo */
.page-columns .content .figure-img{
  border-radius:12px; border:1px solid $line; box-shadow:$shadow-1;
}
.page-columns .content .figure .figcaption{
  color:$ink-soft; font-size:.95rem; margin-top:.35rem;
}



/* =========================================================
   Layout centrado con anchos fijos (sin tocar tamaños)
   ========================================================= */

/* Contenedor maestro: centra a 1240 */
main#quarto-document-content{
  max-width: var(--hero-max) !important;   /* 1240px */
  width: 100% !important;
  margin: 0 auto !important;
  padding: 0 !important;
  box-sizing: border-box !important;
}

/* HERO (title-banner y about:marquee) */
#quarto-content .quarto-title-block .quarto-title-banner,
#quarto-content .quarto-about-marquee .about-image{
  max-width: var(--hero-max) !important;   /* 1240px */
  width: 100% !important;
  margin: 0 auto var(--gap) !important;
  padding: 0 !important; border: 0; box-shadow: none;
  box-sizing: border-box !important;
}
#quarto-content .quarto-title-block .quarto-title-banner img,
#quarto-content .quarto-about-marquee .about-image img{
  display: block; width: 100% !important;
  height: var(--hero-height) !important;   /* 720px fijo */
  object-fit: cover; object-position: center;
  border-radius: $radius; border: 1px solid $line;
}

/* Título / metadatos centrados al ancho del hero */
#quarto-content .quarto-title-block .quarto-title,
#quarto-content .quarto-title-block .quarto-title-meta{
  max-width: var(--hero-max) !important;   /* 1240px */
  width: 100% !important;
  margin: 0 auto !important;
  padding: 0 !important;
  box-sizing: border-box !important;
}

/* Cuerpo del artículo: ancho fijo 1040px */
#quarto-content .page-columns,
#quarto-content .content{
  max-width: var(--content-max) !important; /* 1040px */
  width: 100% !important;
  margin: 0 auto !important;
  padding: 0 !important;
  box-sizing: border-box !important;
  float: none !important;
}

/* Quita límites que achican líneas y previene desbordes raros */
#quarto-content .page-columns .content p,
#quarto-content .page-columns .content ul,
#quarto-content .page-columns .content ol,
#quarto-content .page-columns .content blockquote{
  max-width: none; overflow-wrap: anywhere;
}

/* Oculta sidebars / márgenes fantasma */
#quarto-content .sidebar,
#quarto-content .margin-sidebar,
#quarto-margin-sidebar,
#quarto-content .column-margin{
  display: none !important;
  width: 0 !important; margin: 0 !important; padding: 0 !important;
}

/* Móviles: solo aire lateral (sin cambiar escalas) */
@media (max-width: 640px){
  #quarto-content .page-columns,
  #quarto-content .content,
  #quarto-content .quarto-title-block .quarto-title,
  #quarto-content .quarto-title-block .quarto-title-meta{
    padding-left: 16px !important;
    padding-right: 16px !important;
  }
}

/* Kill switch navbar (no tocar estilos del post) */
.navbar .navbar-brand,
.navbar .navbar-nav .nav-link,
.navbar .nav-link,
.navbar-title {
  color: inherit !important;
  font-family: inherit !important;
  font-weight: inherit !important;
  text-shadow: none !important;
}

/* Botones básicos del post (opcional) */
#quarto-content .btn{
  border-radius: 12px; border: 1px solid $line;
  box-shadow: 0 2px 8px rgba(17,24,39,.05);
  font-family: $headingFont; font-weight: 600;
}
#quarto-content .btn-sm{ padding: .35rem .6rem; }
#quarto-content .btn-primary{ background: $lisa-red; border-color: $lisa-red; color:#fff !important; }
#quarto-content .btn-primary:hover{ background: $lisa-red-dark; border-color: $lisa-red-dark; }
#quarto-content .btn-outline-secondary{ background:#fff; color:$ink; border-color:$line; }
#quarto-content .btn-outline-secondary:hover{ color:#fff; background:$ink; border-color:$ink; }
#quarto-content .btn-primary .bi, #quarto-content .btn-primary svg{
  color: currentColor !important; fill: currentColor !important;
}

/* ===== Cuerpo un poco más pequeño (sin afectar anchos) ===== */
html { font-size: 17px !important; }   /* ~ -6% vs 18px */
#quarto-content { line-height: 1.58; } /* leve ajuste para legibilidad */

/* Opcional: en pantallas muy grandes, reducir un pelín más */
@media (min-width: 1400px){
  html { font-size: 16.6px !important; }
}

/* =========================================================
   HERO con márgenes fijos al viewport (con escala)
   ========================================================= */

/* Diales */
:root{
  --hero-edge:   120px;     /* margen lateral por lado */
  --hero-max:    1700px;    /* tope duro del ancho del banner */
  --hero-height: 720px;     /* tu alto actual */
  --hero-scale:  0.92;      /* <— reduce el ancho percibido (0.90–0.98) */
}

/* Contenedores del hero (title-banner + about:marquee) */
#quarto-content .quarto-title-block .quarto-title-banner,
#quarto-content .quarto-about-marquee .about-image{
  /* Ancho = (viewport - márgenes) * escala, limitado por tope*escala */
  width: min(
    calc((100vw - (2 * var(--hero-edge))) * var(--hero-scale)),
    calc(var(--hero-max) * var(--hero-scale))
  ) !important;
  max-width: none !important;

  /* Centrado real al viewport */
  position: relative !important;
  left: 50% !important;
  transform: translateX(-50%) !important;

  margin: 0 auto var(--gap) !important;
  padding: 0 !important;
  box-sizing: border-box !important;
}

/* Imagen del hero: misma altura */
#quarto-content .quarto-title-block .quarto-title-banner img,
#quarto-content .quarto-about-marquee .about-image img{
  display: block;
  width: 100% !important;
  height: var(--hero-height) !important;  /* 720px */
  object-fit: cover;
  object-position: center;
  border-radius: $radius;
  border: 1px solid $line;
}

/* Seguridad */
html, body{ overflow-x: hidden !important; }

/* --- Desactiva cualquier banner integrado por si quedó activo --- */
#title-block-header .quarto-title-banner{ display: none !important; }

/* ===== HERO manual debajo del título (márgenes fijos + escala) ===== */

/* Diales (los mismos que ya usabas) */
:root{
  --hero-edge:   120px;   /* margen por lado (ajusta a gusto) */
  --hero-max:    1700px;  /* tope de ancho */
  --hero-height: 720px;   /* alto visible del hero */
  --hero-scale:  0.92;    /* 0.90–0.98 para “un poco más chico” */
}

/* Contenedor del hero centrado al viewport */
.post-hero{
  width: min(
    calc((100dvw - (2 * var(--hero-edge))) * var(--hero-scale)),
    calc(var(--hero-max) * var(--hero-scale))
  ) !important;

  /* centrado real al viewport */
  position: relative !important;
  left: 50% !important;
  transform: translateX(-50%) !important;

  margin: 0 auto var(--gap) !important;
  padding: 0 !important;
  box-sizing: border-box !important;
  display: block !important;
}

/* Imagen del hero */
.post-hero-img{
  display: block;
  width: 100% !important;
  height: var(--hero-height) !important;
  object-fit: cover;
  object-position: center;
  border: none !important;
  border-radius: 0 !important;   /* sin esquinas redondeadas */
  box-shadow: none !important;
}

/* Estabilidad con barra de scroll + sin overflow horizontal */
html{ scrollbar-gutter: stable both-edges; }
html, body{ overflow-x: hidden !important; }

/* ===== HERO con proporciones reales (sin recorte ni deformación) ===== */

/* Diales del tamaño de la imagen */
:root{
  --hero-edge:   120px;    /* margen por lado (mantén lo que ya usabas) */
  --hero-max:    1700px;   /* tope de ancho (mantén lo que ya usabas) */

  /* Proporción del archivo (3317x1439 ≈ 2.305:1) */
  --hero-aspect-w: 3317;
  --hero-aspect-h: 1439;
}

/* Contenedor del hero centrado al viewport (como antes) */
.post-hero{
  width: min(
    calc(100dvw - (2 * var(--hero-edge))),
    var(--hero-max)
  ) !important;

  /* altura se calcula sola a partir del aspect-ratio y el ancho */
  aspect-ratio: calc(var(--hero-aspect-w) / var(--hero-aspect-h));
  height: auto !important;

  position: relative !important;
  left: 50% !important;
  transform: translateX(-50%) !important;

  margin: 0 auto var(--gap) !important;
  padding: 0 !important;
  box-sizing: border-box !important;
}

/* Imagen: llena el ancho, sin forzar altura */
.post-hero-img{
  display: block;
  width: 100% !important;
  height: auto !important;                             /* <- clave */
  aspect-ratio: calc(var(--hero-aspect-w) / var(--hero-aspect-h));
  object-fit: contain !important;                      /* sin recorte */
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* Anula cualquier altura fija previa que pueda colarse */
.post-hero-img[style*="height"],
.post-hero img{
  height: auto !important;
}

/* ==== FIX: quitar gutter izquierdo del viewport ==== */
/* Deja solo el gutter del lado del scroll (derecha) */
html{
  scrollbar-gutter: stable !important;   /* antes: stable both-edges */
}

/* Por si algún estilo heredado deja margen/padding lateral */
body{ margin: 0 !important; padding-left: 0 !important; }

/* Solo el título con respiro superior */
:root{
  --title-top-only: 24px;
  --title-top-only-lg: 36px;
}
#quarto-content .quarto-title-block{
  margin-top: var(--title-top-only) !important;
}
@media (min-width: 1024px){
  #quarto-content .quarto-title-block{
    margin-top: var(--title-top-only-lg) !important;
  }
}

/* Oculta el meta original del título (fecha arriba) */
#quarto-content .quarto-title-block .quarto-title-meta{
  display: none !important;
}

/* Contenedor de la fecha reubicada (debajo del hero) */
.pubdate{
  max-width: var(--content-max, 1040px);
  width: 100%;
  margin: .25rem auto 1rem;        /* espacio con hero y cuerpo */
  display: flex;
  justify-content: flex-end;       /* derecha */
  align-items: baseline;
  gap: .5rem;
  color: #374151;                  /* $ink-soft */
  font-size: .95rem;
  line-height: 1.2;
}

.pubdate .label{
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .02em;
  color: #6B7280;                  /* un poco más suave */
}

.pubdate .value{
  white-space: nowrap;             /* evita salto en la fecha */
}

/* móvil: que no quede apretado a la derecha */
@media (max-width: 640px){
  .pubdate{ justify-content: flex-start; padding: 0 16px; }
}

/* fila botones + fecha en la misma línea */
.post-meta-row{
  max-width: var(--content-max, 1040px);
  margin: .25rem auto 1rem;
  display: flex;
  gap: .6rem;
  align-items: center;
}

.post-actions{
  display: flex;
  gap: .6rem;
  flex-wrap: wrap;
}

.post-date{
  margin-left: auto;              /* empuja a la derecha */
  color: #6B7280;                 /* tono suave */
  font-size: .95rem;
  white-space: nowrap;            /* evita salto de línea */
}

/* móvil: que no quede pegado al borde y pueda saltar debajo */
@media (max-width: 640px){
  .post-meta-row{ padding: 0 16px; flex-wrap: wrap; }
  .post-date{ margin-left: 0; }
}

.post-meta-row{
  max-width: var(--content-max, 1040px);
  margin: .25rem auto 1rem;
  display: flex;
  gap: .6rem;
  align-items: center;
}
.post-actions{
  display: flex; gap: .6rem; flex-wrap: wrap;
}
.post-date{
  margin-left: auto;           /* empuja la fecha a la derecha */
  color: #6B7280;
  font-size: .95rem;
  white-space: nowrap;
}
@media (max-width: 640px){
  .post-meta-row{ padding: 0 16px; flex-wrap: wrap; }
  .post-date{ margin-left: 0; }
}

/* Oculta la 'description' visible del bloque de título (solo en la página) */
#title-block-header .description,
#quarto-content .quarto-title-block .description,
#quarto-content .quarto-title-block .quarto-title-meta .description{
  display: none !important;
}

/* ===== HERO manual debajo del título (control por variables) ===== */
.post-hero{
  /* diales por defecto (puedes sobreescribirlos inline en el .qmd) */
  --hero-edge: 120px;     /* margen lateral por lado */
  --hero-max: 1700px;     /* tope de ancho */
  --hero-scale: 0.96;     /* 0.90–0.98 para hacerlo un poco más chico */

  /* ancho = (viewport - 2*margen) * escala, limitado por tope */
  width: min(
    calc((100dvw - (2 * var(--hero-edge))) * var(--hero-scale)),
    calc(var(--hero-max) * var(--hero-scale))
  ) !important;

  /* centrado real al viewport */
  position: relative !important;
  left: 50% !important;
  transform: translateX(-50%) !important;

  margin: 0 auto var(--gap) !important;
  padding: 0 !important;
  box-sizing: border-box !important;
  display: block !important;
}

.post-hero-img{
  display: block;
  width: 100% !important;
  height: auto !important;         /* respeta proporción original */
  object-fit: contain !important;  /* sin recorte */
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}



/* === Espacio confiable debajo del hero (más corto) === */
:root{ --hero-gap: 24px; }  /* antes 46px */

/* 1) Si justo después del hero vienen los botones/fecha */
.post-hero + .post-meta-row{
  margin-top: var(--hero-gap) !important;
}

/* 2) Si alguna vez no hay .post-meta-row, crea el espacio de todos modos */
.post-hero{
  margin-bottom: 0 !important;
  position: relative;
}
.post-hero::after{
  content: "";
  display: block;
  height: var(--hero-gap);
}


/* ===== Más espacio entre Título/Subtítulo y el HERO ===== */
:root{
  --title-bottom-gap: 22px;     /* ajusta 20–36px a gusto */
  --title-bottom-gap-lg: 28px;  /* un poco más en pantallas grandes */
}

/* Empuja el hero cuando viene justo después del bloque de título */
#quarto-content .quarto-title-block + .post-hero{
  margin-top: var(--title-bottom-gap) !important;
}

@media (min-width: 1024px){
  #quarto-content .quarto-title-block + .post-hero{
    margin-top: var(--title-bottom-gap-lg) !important;
  }
}

/* (opcional) Compacta un poco el propio bloque de título si hace falta
#quarto-content .quarto-title-block .quarto-title{ margin-bottom: .45rem !important; }
#quarto-content .quarto-title-block .subtitle{ margin-top: .15rem !important; }
*/

/* ===== HERO manual debajo del título (control por variables) ===== */
.post-hero{
  /* diales por defecto (puedes sobreescribirlos inline en el .qmd) */
  --hero-edge: 120px;     /* margen lateral por lado */
  --hero-max: 1700px;     /* tope de ancho */
  --hero-scale: 0.92;     /* 0.90–0.98 para hacerlo un poco más chico */

  /* ancho = (viewport - 2*margen) * escala, limitado por tope */
  width: min(
    calc((100dvw - (2 * var(--hero-edge))) * var(--hero-scale)),
    calc(var(--hero-max) * var(--hero-scale))
  ) !important;

  /* centrado real al viewport */
  position: relative !important;
  left: 50% !important;
  transform: translateX(-50%) !important;

  margin: 0 auto var(--gap) !important;
  padding: 0 !important;
  box-sizing: border-box !important;
  display: block !important;
}

.post-hero-img{
  display: block;
  width: 100% !important;
  height: auto !important;         /* respeta proporción original */
  object-fit: contain !important;  /* sin recorte */
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* Oculta el subtítulo que imprime el title-block (arriba) */
#quarto-content .quarto-title-block .subtitle{
  display: none !important;
}

/* Subtítulo reubicado debajo del hero */
.post-subtitle-below{
  max-width: var(--content-max, 1040px);
  margin: 10px auto 14px;        /* aire arriba y abajo */
  font-family: var(--bs-font-sans-serif, "Cabin", system-ui, -apple-system, "Segoe UI", Roboto, sans-serif);
  font-weight: 600;
  font-size: clamp(1.05rem, 1.2vw + .8rem, 1.25rem);
  line-height: 1.35;
  color: #374151;                 /* tono suave */
  letter-spacing: .1px;
}

@media (max-width: 640px){
  .post-subtitle-below{ padding: 0 16px; }
}

.figure-plain{
  max-width: 720px;            /* ajusta 680–760px a gusto */
  margin: 0 auto 1.25rem;
  text-align: center;
}
.figure-plain img{
  width: 100%;
  height: auto;
  border-radius: 0 !important;
  border: none !important;
  box-shadow: none !important;
}

:root{ --fig-top-gap: 18px; }

.figure-plain{
  margin-top: var(--fig-top-gap) !important;
}
.figure-plain img{
  border-radius: 0 !important;
  border: none !important;
  box-shadow: none !important;
}

/* Ocultar subtítulo en la página, conservar en metadatos */
#quarto-content .quarto-title-block .subtitle,
#title-block-header .quarto-title-banner .subtitle,  /* si el tema lo pone sobre el banner */
.post-subtitle-below { 
  display: none !important;
}

/* ==== Espacio real antes de la foto del equipo (sin colapso) ==== */
:root{ --fig-top-gap: 22px; } /* súbelo/bájalo: 18–28px */

.figure-plain,
#fig-equipo-lisa{
  margin-top: 0 !important;          /* evitamos colapso con lo anterior */
  position: relative;                 /* base para el pseudo-elemento */
}

/* Spacer interno que siempre agrega aire arriba de la figura */
.figure-plain::before,
#fig-equipo-lisa::before{
  content: "";
  display: block;
  height: var(--fig-top-gap);
}

/* (opcional) si prefieres, usa padding en vez del ::before
.figure-plain, #fig-equipo-lisa{ padding-top: var(--fig-top-gap) !important; }
*/

/* Mantén sin bordes la imagen */
.figure-plain img,
#fig-equipo-lisa img{
  border-radius: 0 !important;
  border: none !important;
  box-shadow: none !important;
}

/* === Espacio fiable entre la foto del equipo y el footer === */
/* Dial global (ajusta a gusto) */
:root{ --footer-gap: 64px; }  /* prueba 36–64px */

/* Si usas el id del ejemplo (#fig-equipo-lisa) */
#fig-equipo-lisa{
  position: relative;
  margin-bottom: 0 !important;   /* evita colapso */
}
#fig-equipo-lisa::after{
  content: "";
  display: block;
  height: var(--footer-gap);     /* espacio antes del footer */
}

/* Extra: si a veces no pones id, aplica al ÚLTIMO .figure-plain de la página */
.figure-plain:last-of-type{
  position: relative;
  margin-bottom: 0 !important;
}
.figure-plain:last-of-type::after{
  content: "";
  display: block;
  height: var(--footer-gap);
}

#quarto-page > footer,
footer.footer,
.nav-footer{
  --bs-body-color: #fff;
  --bs-heading-color: #fff;
  --bs-link-color: #fff;
  --bs-link-hover-color: #fff;
  color: #fff !important;
}
